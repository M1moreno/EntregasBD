CREATE DATABASE nidofaust;
USE nidofaust;

CREATE TABLE empleado(cedula INT(3) UNSIGNED PRIMARY KEY, 
carnet INT(3) NOT NULL,
nombre VARCHAR(40) NOT NULL,  
salario INT(4) NOT NULL,
rol VARCHAR(4) NOT NULL
)ENGINE = InnoDB;

CREATE TABLE cliente(cedula INT(3) UNSIGNED PRIMARY KEY, 
nombre VARCHAR(40) NOT NULL,  
cantidad_personas INT(4) NOT NULL
)ENGINE = InnoDB;

CREATE TABLE lista_reproduccion(
codigoID INT(3) UNSIGNED PRIMARY KEY,
nombre VARCHAR(40) NOT NULL,
plataforma VARCHAR(40) NOT NULL,
cantidad_canciones INT(3) NOT NULL,

INDEX USING BTREE(nombre)
)ENGINE = InnoDB;

CREATE TABLE producto(codigo INT(3) UNSIGNED PRIMARY KEY, 
nombre VARCHAR(40) NOT NULL,
tipo VARCHAR(40),
precio_unitario INT(4),

INDEX USING BTREE(nombre)
)ENGINE = InnoDB;

CREATE TABLE mesa (id INT(3) UNSIGNED NOT NULL PRIMARY KEY, 
nombre VARCHAR(40) NOT NULL,
tama√±o INT(4),
ubicacion VARCHAR(40) NOT NULL,
mesa_unida INT(3) UNSIGNED,

INDEX USING BTREE(nombre),

FOREIGN KEY (mesa_unida) REFERENCES mesa(id) ON DELETE CASCADE
)ENGINE = InnoDB;

CREATE TABLE mesaxcliente (
id_mesa INT(3) UNSIGNED,
cc_cliente INT(3) UNSIGNED,
fecha DATE NOT NULL,

FOREIGN KEY (id_mesa) REFERENCES mesa(id) ON DELETE CASCADE,
FOREIGN KEY (cc_cliente) REFERENCES cliente(cedula) ON DELETE CASCADE
)ENGINE = InnoDB;

CREATE TABLE cancion(
codigoID INT(3) UNSIGNED PRIMARY KEY,
nombre VARCHAR(40) NOT NULL,
artista VARCHAR(40) NOT NULL,
album VARCHAR(40) NOT NULL,
genero VARCHAR(40),
fecha_creacion DATE NOT NULL,
duracion INT(4) UNSIGNED,
id_lista_reproduccion INT(3) UNSIGNED,

INDEX USING BTREE(nombre),

FOREIGN KEY (id_lista_reproduccion) REFERENCES lista_reproduccion(codigoID)
)ENGINE = InnoDB;

CREATE TABLE cancion_personal(
cc_cliente INT(3) UNSIGNED,
id_cancion INT(3) UNSIGNED,
fecha DATE NOT NULL,

FOREIGN KEY (cc_cliente) REFERENCES cliente(cedula),
FOREIGN KEY (id_cancion) REFERENCES cancion(codigoID)
)ENGINE = InnoDB;

CREATE TABLE orden(
codigo INT(3) UNSIGNED NOT NULL PRIMARY KEY,
fecha DATE NOT NULL,
precio INT(3) UNSIGNED,
cc_cliente INT(3) UNSIGNED,
cc_mesero_inicial INT(3) UNSIGNED,
cc_mesero_entrega INT(3) UNSIGNED,
cc_bartender INT(3) UNSIGNED,

FOREIGN KEY (cc_cliente) REFERENCES cliente(cedula),
FOREIGN KEY (cc_mesero_inicial) REFERENCES empleado(cedula),
FOREIGN KEY (cc_mesero_entrega) REFERENCES empleado(cedula),
FOREIGN KEY (cc_bartender) REFERENCES empleado(cedula)
)ENGINE = InnoDB;

CREATE TABLE compra(
codigo_orden INT(3) UNSIGNED,
codigo_producto INT(3) UNSIGNED,
cantidad INT(3) UNSIGNED,

FOREIGN KEY (codigo_orden) REFERENCES orden(codigo),
FOREIGN KEY (codigo_producto) REFERENCES producto(codigo)
)ENGINE = InnoDB;